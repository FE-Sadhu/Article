### ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–

wikiä¸Šè¿™æ ·å®šä¹‰ï¼š

> åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚

æŸ¯é‡ŒåŒ–åˆç§°**éƒ¨åˆ†æ±‚å€¼**ï¼Œå­—é¢æ„æ€å°±æ˜¯ä¸ä¼šç«‹åˆ»æ±‚å€¼ï¼Œè€Œæ˜¯åˆ°äº†éœ€è¦çš„æ—¶å€™å†å»æ±‚å€¼ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

```js
function add(a, b) {
  return a + b;
}

function curryingAdd(a) {
  return function(b) {
    return a + b;
  }
}

add(1, 2); // 3
curryingAdd(1)(2); // 3
```

å‡½æ•°addæ˜¯ä¸€èˆ¬çš„ä¸€ä¸ªå‡½æ•°,å°±æ˜¯å°†ä¼ è¿›æ¥çš„å‚æ•°aå’Œbç›¸åŠ ;å‡½æ•°curryingAddå°±æ˜¯å¯¹å‡½æ•°addè¿›è¡ŒæŸ¯é‡ŒåŒ–çš„å‡½æ•°;è¿™æ ·ä¸€æ¥,åŸæ¥æˆ‘ä»¬éœ€è¦ç›´æ¥ä¼ è¿›å»ä¸¤ä¸ªå‚æ•°æ¥è¿›è¡Œè¿ç®—çš„å‡½æ•°,ç°åœ¨éœ€è¦åˆ†åˆ«ä¼ å…¥å‚æ•°aå’Œbã€‚

ä¸ºä»€ä¹ˆè¦è¿™æ ·åš?

+ æå‰ç»‘å®šå¥½å‡½æ•°é‡Œé¢çš„æŸäº›å‚æ•°,è¾¾åˆ°å‚æ•°å¤ç”¨çš„æ•ˆæœ,æé«˜äº†é€‚ç”¨æ€§.
+ å›ºå®šæ˜“å˜å› ç´ 
+ å»¶è¿Ÿè®¡ç®—

æ€»ä¹‹,å‡½æ•°çš„æŸ¯é‡ŒåŒ–èƒ½å¤Ÿè®©ä½ é‡æ–°ç»„åˆä½ çš„åº”ç”¨,æŠŠä½ çš„å¤æ‚åŠŸèƒ½æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„å°éƒ¨åˆ†,æ¯ä¸€ä¸ªå°çš„éƒ¨åˆ†éƒ½æ˜¯ç®€å•çš„,ä¾¿äºç†è§£çš„,è€Œä¸”æ˜¯å®¹æ˜“æµ‹è¯•çš„ã€‚

### å¦‚ä½•å¯¹å‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–

ç”±æµ…å…¥æ·±è®²è§£å¦‚ä½•å¯¹ä¸€ä¸ªå¤šå‚æ•°çš„å‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–ã€‚

### ç¬¬ä¸€æ­¥ï¼ˆæµ…ï¼‰

å‡å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåŠŸèƒ½,å°±æ˜¯è¾“å‡ºè¯­å¥nameå–œæ¬¢song,å…¶ä¸­nameå’Œsongéƒ½æ˜¯å¯å˜å‚æ•°;é‚£ä¹ˆä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šè¿™æ ·å†™:

```js
function print(name, song) {
  console.log(name + 'å–œæ¬¢çš„æ­Œæ›²æ˜¯ï¼š' + song);
}
```
å¯¹printå‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–åçš„å‡½æ•°åº”è¯¥æ˜¯è¿™æ ·ï¼š
```js
function curryingPrint(name) {
  return function(song) {
    console.log(name + 'å–œæ¬¢çš„æ­Œæ›²æ˜¯ï¼š' + song);
  }
}

var tomLike = curryingPrint('Tom');
tomLike('ä¸ƒé‡Œé¦™');
var jerryLike = curryingPrint('Jerry');
jerryLike('é›…ä¿—å…±èµ');

// Tomå–œæ¬¢çš„æ­Œæ›²æ˜¯ï¼šä¸ƒé‡Œé¦™
// Jerryå–œæ¬¢çš„æ­Œæ›²æ˜¯ï¼šé›…ä¿—å…±èµ
```

### ç¬¬äºŒæ­¥ï¼ˆä¸­ï¼‰
ä¸Šé¢æˆ‘ä»¬è™½ç„¶å¯¹å‡½æ•°printè¿›è¡Œäº†æŸ¯é‡ŒåŒ–,ä½†æ˜¯æˆ‘ä»¬å¯ä¸æƒ³åœ¨éœ€è¦æŸ¯é‡ŒåŒ–çš„æ—¶å€™,éƒ½åƒä¸Šé¢é‚£æ ·ä¸æ–­åœ°è¿›è¡Œå‡½æ•°çš„åµŒå¥—ï¼Œè¿™æ ·ä»£ç ä¼šå¾ˆéš¾çœ‹ï¼Œä¹Ÿä¸å®¹æ˜“ç»´æŠ¤äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åˆ›é€ ä¸€äº›å¸®åŠ©å…¶å®ƒå‡½æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–çš„å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬æš‚ä¸”å«å®ƒä¸ºcurryingHelperå§,ä¸€ä¸ªç®€å•çš„curryingHelperå‡½æ•°å¦‚ä¸‹æ‰€ç¤º:
```js
function curryingHelper(fn) {
  var args = Array.prototype.slice.call(arguments, 1);
  return function() {
    var traceArgs = Array.prototype.slice.call(arguments);
    var resArgs = args.concat(traceArgs);
    return fn.apply(null, resArgs); //è¿”å›æ‰§è¡Œç»“æœ
  }
}
```

éªŒè¯ä¸€ä¸‹ï¼Ÿ

```js
function showMsg(name, age, fruit) {
  console.log('My name is ' + name + ', I\'m ' + age + ' years old, ' + ' and I like eat ' + fruit);
}

var curryingShowMsg1 = curryingHelper(showMsg, 'sadhu');
curryingShowMsg1(21, 'apple');

console.log('---');

var curryingShowMsg2 = curryingHelper(showMsg, 'sadhu', 21);
curryingShowMsg2('apple');

console.log('---');

var curryingShowMsg3 = curryingHelper(showMsg);
curryingShowMsg3('sadhu', 21, 'apple');

/* è¾“å‡º
 My name is sadhu, I'm 21 years old,  and I like eat apple
---
My name is sadhu, I'm 21 years old,  and I like eat apple
---
My name is sadhu, I'm 21 years old,  and I like eat apple
*/
```

è¯æ˜ï¼Œæˆ‘ä»¬è¿™ä¸ªæŸ¯é‡ŒåŒ–çš„å‡½æ•°æ˜¯ğŸ™†çš„ã€‚è¿™é‡Œçš„curryingHelperå°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå‡½æ•°ä¸ºå‚æ•°ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯å‡½æ•°ã€‚

### ç¬¬ä¸‰æ­¥ï¼ˆæ·±ï¼‰

ä¸Šé¢çš„æŸ¯é‡ŒåŒ–å¸®åŠ©å‡½æ•°ç¡®å®å·²ç»èƒ½å¤Ÿè¾¾åˆ°æˆ‘ä»¬çš„ä¸€èˆ¬æ€§éœ€æ±‚äº†,ä½†æ˜¯å®ƒè¿˜ä¸å¤Ÿå¥½,æˆ‘ä»¬å¸Œæœ›é‚£äº›ç»è¿‡æŸ¯é‡ŒåŒ–åçš„å‡½æ•°å¯ä»¥**æ¯æ¬¡åªä¼ é€’è¿›å»ä¸€ä¸ªå‚æ•°**,ç„¶å**å¯ä»¥è¿›è¡Œå¤šæ¬¡å‚æ•°çš„ä¼ é€’**ï¼Œæ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå°±æ˜¯åœ¨èƒ½å®ç°curryingHelperçš„**è¿”å›å‡½æ•°**çš„è°ƒç”¨æ–¹å¼çš„åŸºç¡€ä¸Šå†å®ç°å¦‚ä¸‹è¿™æ ·ä¼ ï¼š

```js
betterShowMsg('sadhu')(21)('apple');
```

åŠ¨ä¸‹è„‘ç­‹ï¼Œå†™ä¸€ä¸ªbetterCurryingHelperå‡½æ•°æ¥å®ç°ï¼š

```js
function curryingHelper(fn) {
  var args = Array.prototype.slice.call(arguments, 1);
  return function() {
    var traceArgs = Array.prototype.slice.call(arguments);
    var resArgs = args.concat(traceArgs);
    return fn.apply(null, resArgs); //è¿”å›æ‰§è¡Œç»“æœ
  }
}

function betterCurryingHelper(fn, len) {
  var length = len || fn.length // å¯ä»¥æŒ‡å‡ºfnæ€»å½¢å‚çš„ä¸ªæ•°
  return function() {
    var allArgsFulfilled = (arguments.length >= length);
    
    // å¦‚æœå‚æ•°å…¨éƒ¨æ»¡è¶³,å°±å¯ä»¥ç»ˆæ­¢é€’å½’è°ƒç”¨
    if (allArgsFulfilled) {
      return fn.apply(null, arguments);
    } else {
      var argsNeedFulfilled = [fn].concat(Array.prototype.slice.call(arguments));
      return betterCurryingHelper(curryingHelper.apply(null, argsNeedFulfilled), length - arguments.length);
    }
  }
}
```

curryingHelper()æ˜¯ç¬¬äºŒæ­¥é‡Œçš„é‚£ä¸ªå‡½æ•°ã€‚è¿™é‡Œçš„ä»£ç å…¶å®æ²¡å•¥éš¾åº¦ï¼Œå…³é”®åœ¨äºä½ èƒ½ä¸èƒ½ç†æ¸…é€’å½’çš„è¿‡ç¨‹ã€‚ç†è§£ä¸äº†çš„ä»”ç»†å¤šçœ‹çœ‹ã€‚

éªŒè¯ä¸€ä¸‹ï¼Ÿ

```js
// éªŒè¯ä¸€ä¸‹
function showMsg(name, age, fruit) {
  console.log('My name is ' + name + ', I\'m ' + age + ' years old, ' + ' and I like eat ' + fruit);
}

var betterShowMsg = betterCurryingHelper(showMsg);

betterShowMsg('sadhu', 21, 'apple');
console.log('---');
betterShowMsg('sadhu', 21)('apple');
console.log('---');
betterShowMsg('sadhu')(21, 'apple');
console.log('---');
betterShowMsg('sadhu')(21)('apple');

/* è¾“å‡º
My name is sadhu, I'm 21 years old,  and I like eat apple
---
My name is sadhu, I'm 21 years old,  and I like eat apple
---
My name is sadhu, I'm 21 years old,  and I like eat apple
---
My name is sadhu, I'm 21 years old,  and I like eat apple
*/
```

æˆåŠŸï¼Œåˆºæ¿€ã€‚

ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼šç»™setTimeoutä¼ é€’åœ°è¿›æ¥çš„å‡½æ•°æ·»åŠ å‚æ•°ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹,æˆ‘ä»¬å¦‚æœæƒ³ç»™ä¸€ä¸ªsetTimeoutä¼ é€’è¿›æ¥çš„å‡½æ•°æ·»åŠ å‚æ•°çš„è¯,ä¸€èˆ¬ä¼šä½¿ç”¨è¿™ç§æ–¹æ³•:
```js
function hello(name) {
    console.log('Hello, ' + name);
}
setTimeout(hello('dreamapple'), 3600); //ç«‹å³æ‰§è¡Œ,ä¸ä¼šåœ¨3.6såæ‰§è¡Œ
setTimeout(function() {
    hello('dreamapple');
}, 3600); // 3.6s åæ‰§è¡Œ
```

æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„åŒ¿åå‡½æ•°åŒ…è£¹æˆ‘ä»¬è¦æ‰§è¡Œçš„å‡½æ•°,ç„¶ååœ¨å‡½æ•°ä½“é‡Œé¢ç»™é‚£ä¸ªå‡½æ•°ä¼ é€’å‚æ•°å€¼.

å½“ç„¶,åœ¨ES5é‡Œé¢,æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°çš„bindæ–¹æ³•,å¦‚ä¸‹æ‰€ç¤º:

```js
setTimeout(hello.bind(this, 'dreamapple'), 3600); // 3.6s ä¹‹åæ‰§è¡Œå‡½æ•°
```

è¿™æ ·ä¹Ÿæ˜¯éå¸¸çš„æ–¹ä¾¿å¿«æ·,å¹¶ä¸”å¯ä»¥ç»‘å®šå‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡.

æˆ‘ä»¬æœ¬ç¯‡æ–‡ç« æ˜¯è®¨è®ºå‡½æ•°çš„æŸ¯é‡ŒåŒ–,å½“ç„¶æˆ‘ä»¬è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°çš„æŸ¯é‡ŒåŒ–æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœ:

```js
setTimeout(curryingHelper(hello, 'dreamapple'), 3600); // å…¶ä¸­curryingHelperæ˜¯ä¸Šé¢å·²ç»æåŠè¿‡çš„
```
è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„,æ˜¯ä¸æ˜¯å¾ˆé…·.å…¶å®å‡½æ•°çš„bindæ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨å‡½æ•°çš„æŸ¯é‡ŒåŒ–æ¥å®Œæˆçš„ã€‚å¯ä»¥çœ‹è¿™é‡Œï¼š[æ·±å…¥jsä¹‹é€ bindè½®å­](https://github.com/YxrSadhu/Article/issues/2)ã€‚

### å…³äºæŸ¯é‡ŒåŒ–çš„æ€§èƒ½

å½“ç„¶,ä½¿ç”¨æŸ¯é‡ŒåŒ–æ„å‘³ç€æœ‰ä¸€äº›é¢å¤–çš„å¼€é”€;è¿™äº›å¼€é”€ä¸€èˆ¬æ¶‰åŠåˆ°è¿™äº›æ–¹é¢,é¦–å…ˆæ˜¯å…³äºå‡½æ•°å‚æ•°çš„è°ƒç”¨,æ“ä½œargumentså¯¹è±¡é€šå¸¸ä¼šæ¯”æ“ä½œå‘½åçš„å‚æ•°è¦æ…¢ä¸€ç‚¹;è¿˜æœ‰,åœ¨ä¸€äº›è€çš„ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­arguments.lengthçš„å®ç°æ˜¯å¾ˆæ…¢çš„;ç›´æ¥è°ƒç”¨å‡½æ•°fnè¦æ¯”ä½¿ç”¨fn.apply()æˆ–è€…fn.call()è¦å¿«ä¸€ç‚¹;äº§ç”Ÿå¤§é‡çš„åµŒå¥—ä½œç”¨åŸŸè¿˜æœ‰é—­åŒ…ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½è¿˜æœ‰é€Ÿåº¦çš„é™ä½.ä½†æ˜¯,**å¤§å¤šæ•°çš„webåº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆæ—¶å‘ç”Ÿåœ¨æ“ä½œDOMä¸Šçš„,æ‰€ä»¥ä¸Šé¢çš„é‚£äº›å¼€é”€æ¯”èµ·DOMæ“ä½œçš„å¼€é”€è¿˜æ˜¯æ¯”è¾ƒå°çš„ã€‚**



æœ¬æ–‡å®Œã€‚

å¸Œæœ›çœ‹åˆ°å„ä½æŠ€æœ¯äººå¯¹è¿™ç¯‡æ–‡ç« æœ‰ä¸åŒçš„æœ‰â€œè¯æ®â€ï¼Œç¬¦åˆé€»è¾‘çš„åˆ†æã€çœ‹æ³•ï½

æ–‡ç« ä¼šç¬¬ä¸€æ—¶é—´æ›´æ–°åœ¨[GitHub](https://github.com/YxrSadhu/Article)ï¼Œè§‰å¾—å†™å¾—è¿˜ä¸é”™çš„ï¼Œå¯ä»¥ç‚¹ä¸ªstaræ”¯æŒä¸‹ä½œè€…ğŸª

---

å‚è€ƒï¼š

1. [æŒæ¡JavaScriptå‡½æ•°çš„æŸ¯é‡ŒåŒ–](https://github.com/dreamapplehappy/hacking-with-javascript/blob/master/books/javascript-the-good-parts/chapter-4-function/currying.md)
2. [JavaScript ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹å®è·µ](https://www.ibm.com/developerworks/cn/web/1006_qiujt_jsfunctional/)
3. [å‡½æ•°å¼JavaScriptï¼ˆ4ï¼‰ï¼šå‡½æ•°æŸ¯é‡ŒåŒ–](http://blog.jobbole.com/77956/)
4. [å‰ç«¯å¼€å‘è€…è¿›é˜¶ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ–Currying](http://www.cnblogs.com/pigtail/p/3447660.html)
5. [jsåŸºç¡€ç¯‡ä¹‹â€”â€”JavaScriptçš„æŸ¯é‡ŒåŒ–å‡½æ•°è¯¦è§£](https://www.toutiao.com/i6220924016044016129/)
6. [JavaScriptä¸“é¢˜ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ–](https://github.com/mqyqingfeng/Blog/issues/42)