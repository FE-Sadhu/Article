å­¦ä¹ ç»§æ‰¿çš„é‡è¦æ€§ï¼Œä¸ç”¨å¤šè¯´ã€‚ä¸‹é¢ç›´æ¥å¼€å§‹å•¦ã€‚

### åŸå‹é“¾ç»§æ‰¿
åŸå‹é“¾ç»§æ‰¿é¦–å…ˆå¾—çŸ¥é“åŸå‹é“¾å§ã€‚å¿˜è®°äº†å¯ä»¥å»çœ‹è¿™ç¯‡æ–‡ç« å¤ä¹ ä¸‹ï¼š[æ·±å…¥jsä¹‹åŸå‹ä¸åŸå‹é“¾](https://github.com/YxrSadhu/Article/issues/11)ã€‚

```js
function Person(name) {
  this.name = name;
  this.body = ['head', 'arm', 'leg'];
}

Person.prototype.act = function() {
  console.log('run');
}

function Wife(hobby) {
  this.hobby = hobby;
  this.friend = [1, 2, 3];
}

Wife.prototype.job = function() {
  console.log('FE');
}

// å°†çˆ¶æ„é€ å‡½æ•°çš„å®ä¾‹èµ‹ç»™å­æ„é€ å‡½æ•°çš„åŸå‹ã€‚
Wife.prototype = new Person(); // Wife.prototype.__proto__ === Person.prototype

const kk = new Wife('clothes');


```

![](https://user-gold-cdn.xitu.io/2019/4/25/16a54bde157eb052?w=756&h=452&f=png&s=60570)

è¿™æ–¹å¼çš„ç¼ºç‚¹ï¼š

1. å¤šä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹

2. å­ç±»å‹çš„åŸå‹ä¸Šçš„ constructor å±æ€§è¢«é‡å†™äº†

3. ç»™å­ç±»å‹åŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³•å¿…é¡»åœ¨æ›¿æ¢åŸå‹ä¹‹å

4. åˆ›å»ºå­ç±»å‹å®ä¾‹æ—¶æ— æ³•å‘çˆ¶ç±»å‹çš„æ„é€ å‡½æ•°ä¼ å‚


#### å¤šä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹

å› ä¸ºPersonæ„é€ å‡½æ•°çš„å®ä¾‹é‡Œæœ‰å¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¹¶ä¸”Personæ„é€ å‡½æ•°çš„å®ä¾‹æ˜¯Wifeæ„é€ å‡½æ•°çš„å®ä¾‹çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥Wifeçš„å®ä¾‹çš„åŸå‹é“¾ä¸Šå­˜åœ¨äº†å¼•ç”¨ç±»å‹çš„å€¼ï¼Œè‡ªç„¶å¤šä¸ªWifeå®ä¾‹å¯¹è¯¥å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸Šä¾‹åŸºç¡€ä¸Šï¼š

```js
const kk = new Wife('clothes');

const ww = new Wife('cook');

kk.body.push('eye');

console.log(ww.body);
// [ 'head', 'arm', 'leg', 'eye' ]
```

#### å­ç±»å‹çš„åŸå‹ä¸Šçš„ constructor å±æ€§è¢«é‡å†™

æˆ‘ä»¬çŸ¥é“æ¯ä¸ªåŸå‹å¯¹è±¡æœ¬èº«éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘ä¸ä¹‹å¯¹åº”çš„æ„é€ å‡½æ•°ã€‚ä½†æ˜¯åœ¨åŸå‹é“¾ç»§æ‰¿æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥æ‰§è¡Œäº†è¿™ä¸ªæ“ä½œï¼š`Wife.prototype = new Person()`ï¼Œè¿™ä¸ªæ“ä½œç›´æ¥æŠŠPersonçš„å®ä¾‹ä¼ ç»™Wifeçš„åŸå‹ï¼Œè¦†ç›–äº†åŸæœ¬Wifeå¯¹åº”çš„åŸå‹å¯¹è±¡ã€‚åˆå› ä¸ºPersoné‡Œé¢æ²¡æœ‰å®šä¹‰constructorå±æ€§ï¼Œæ‰€ä»¥å…¶å®ä¾‹ä¹Ÿä¸ä¼šæœ‰ï¼Œå³ç°åœ¨Wifeçš„åŸå‹å¯¹è±¡ä¹Ÿæ²¡æœ‰constructorå±æ€§äº†ã€‚

![](https://user-gold-cdn.xitu.io/2019/4/26/16a57743f5d8d1df?w=1342&h=714&f=png&s=195639)

æ­¤æ—¶å¦‚æœè°ƒç”¨`å®ä¾‹.constructor`çš„è¯ï¼Œä¼šå…¶åœ¨åŸå‹é“¾ä¸Šæ‰¾åˆ°è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘çš„æ˜¯Personæ„é€ å‡½æ•°ï¼š

```js
console.log(ww.constructor);
// [Function: Person]
```

![](https://user-gold-cdn.xitu.io/2019/4/26/16a5776f800c4790?w=1328&h=724&f=png&s=194099)

#### ç»™å­ç±»å‹åŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³•å¿…é¡»åœ¨æ›¿æ¢åŸå‹ä¹‹å

![](https://user-gold-cdn.xitu.io/2019/4/26/16a577979a680cd3?w=1204&h=546&f=png&s=120782)

#### åˆ›å»ºå­ç±»å‹å®ä¾‹æ—¶æ— æ³•å‘çˆ¶ç±»å‹çš„æ„é€ å‡½æ•°ä¼ å‚

è¿™å¼ å›¾å°±è¯´æ˜äº†ã€‚

![](https://user-gold-cdn.xitu.io/2019/4/26/16a577d650f6e31b?w=1378&h=684&f=png&s=185259)

### å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆç»å…¸ç»§æ‰¿ï¼‰


```js
function Person(name) {
  this.name = name;
  this.body = ['head', 'arm', 'leg'];
}

Person.prototype.act = function() {
  console.log('run');
}

function Wife(hobby) {
  Person.call(this, 'Linda')
  this.hobby = hobby;
  this.friend = [1, 2, 3];
}

Wife.prototype.job = function() {
  console.log('FE');
}

const kk = new Wife('clothes');
```

![](https://user-gold-cdn.xitu.io/2019/4/26/16a57844e65175d5?w=998&h=416&f=png&s=64560)

å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶å¯ä»¥ç»™çˆ¶ç±»ä¼ å‚ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•ä¸ä¼šé‡å†™å­ç±»çš„åŸå‹ï¼Œæ•…ä¹Ÿä¸ä¼šæŸåå­ç±»çš„åŸå‹æ–¹æ³•ã€‚æ­¤å¤–ï¼Œç”±äºæ¯ä¸ªå®ä¾‹éƒ½ä¼šå°†çˆ¶ç±»ä¸­çš„å±æ€§å¤åˆ¶ä¸€ä»½ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šå‘ç”Ÿå¤šä¸ªå®ä¾‹ç¯¡æ”¹å¼•ç”¨ç±»å‹çš„é—®é¢˜ï¼ˆå› ä¸ºçˆ¶ç±»çš„å®ä¾‹å±æ€§ä¸åœ¨åŸå‹ä¸­äº†ï¼‰ã€‚

ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯çˆ¶æ„é€ å‡½æ•°åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¸æ™“å¾—è·‘åˆ°å“ªé‡Œå»äº†ï¼Œå› ä¸ºè¯¥ç»§æ‰¿æ–¹å¼åªèƒ½ç»§æ‰¿çˆ¶æ„é€ å‡½æ•°å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•è€Œä¸èƒ½ç»§æ‰¿çˆ¶æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚

### ç»„åˆç»§æ‰¿

è¯¥ç»§æ‰¿æ–¹å¼å¸æ”¶ä¸Šä¸¤ç§ç»§æ‰¿æ–¹å¼çš„ä¼˜ç‚¹ï¼šå€Ÿç”¨æ„é€ å‡½æ•°å®ç°å¯¹æ„é€ å‡½æ•°å®ä¾‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œå€Ÿç”¨åŸå‹é“¾å®ç°å¯¹æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ã€‚

```js
function Person(name) {
  this.name = name;
  this.body = ['head', 'arm', 'leg'];
}

Person.prototype.act = function() {
  console.log('run');
}

function Wife(hobby) {
  this.hobby = hobby;
  this.friend = [1, 2, 3];

  Person.call(this, 'Linda'); // ç¬¬äºŒæ¬¡è°ƒç”¨çˆ¶æ„é€ å‡½æ•°
}

Wife.prototype = new Person(); // ç¬¬ä¸€æ¬¡è°ƒç”¨çˆ¶æ„é€ å‡½æ•°

Wife.prototype.constructor = Wife; // ä¿®æ­£constructoræŒ‡é’ˆ

Wife.prototype.job = function () {
  console.log('FE');
}

const kk = new Wife('clothes'); 


```

![](https://user-gold-cdn.xitu.io/2019/4/26/16a5879cb8366e05?w=1194&h=572&f=png&s=382076)

![](https://user-gold-cdn.xitu.io/2019/4/26/16a587f401dbf512?w=1002&h=596&f=png&s=104363)

ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ã€‚è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶æ„é€ å‡½æ•°ï¼Œé€ æˆWifeå®ä¾‹é‡Œå’ŒåŸå‹é‡Œéƒ½å­˜åœ¨çˆ¶æ„é€ å‡½æ•°çš„å±æ€§nameæœˆbodyã€‚æ ¹æ®åŸå‹é“¾çš„è§„åˆ™ï¼Œå®ä¾‹ä¸Šçš„è¿™ä¸¤ä¸ªå±æ€§ä¼š**å±è”½**åŸå‹é“¾ä¸Šçš„ä¸¤ä¸ªåŒåå±æ€§ã€‚

### åŸå‹å¼ç»§æ‰¿

è¯¥æ–¹å¼é€šè¿‡**å€ŸåŠ©åŸå‹**ï¼Œ**åŸºäºå·²æœ‰å¯¹è±¡**åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º object çš„å‡½æ•°ï¼Œç„¶ååœ¨é‡Œé¢ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„å‡½æ•° Fï¼Œå¹¶å°†è¯¥å‡½æ•°çš„ prototype æŒ‡å‘ä¼ å…¥çš„å¯¹è±¡ï¼Œæœ€åè¿”å›è¯¥å‡½æ•°çš„å®ä¾‹ã€‚æœ¬è´¨æ¥è®²ï¼Œobject() å¯¹ä¼ å…¥çš„å¯¹è±¡åšäº†ä¸€æ¬¡ **æµ…æ‹·è´**ã€‚

```js
function object(obj) {
  function F() {};
  F.prototype = obj;
  return new F();
}
```

æµ‹è¯•ï¼š
```js
function object(obj) {
  function F() {};
  F.prototype = obj;
  return new F();
}

const kk = {
  name: 'Linda',
  friends: [1, 2, 3],
  job: function() {
    console.log('FE');
  }
}

const exp = object(kk);

```

![](https://user-gold-cdn.xitu.io/2019/4/26/16a5886fdf070198?w=554&h=306&f=png&s=25286)

åŸå‹å¼ç»§æ‰¿ç›¸å½“äºæµ…æ‹·è´ï¼Œé€šè¿‡åŸå‹é“¾æ¥è®¿é—®å±æ€§ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´**å¼•ç”¨ç±»å‹**è¢«å¤šä¸ªå®ä¾‹ç¯¡æ”¹ã€‚

åœ¨ä¸Šé¢ä¾‹å­ä¸­åŠ ä¸Šè¿™æ®µä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿï¼š
```js
const exp2 = object(kk);
exp.name = 'sadhu';
console.log(exp2.name); // Linda
```

`exp.name = 'sadhu'`å®é™…æ˜¯åœ¨expè‡ªèº«æ·»åŠ äº†å±æ€§nameè€Œéä¿®æ”¹äº†åŸå‹ä¸Šçš„nameå€¼ã€‚

### å¯„ç”Ÿå¼ç»§æ‰¿

åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§å½¢å¼æ¥åšå¢å¼ºå¯¹è±¡ï¼Œæœ€åè¿”å›å¯¹è±¡ã€‚

```js
function creatObj(o) {
  const clone = Object.create(o);

  clone.act = 'coding'
  clone.job = function() {
    console.log('FE');
  };

  return clone;
}

const kk = {
  name: 'Linda',
  friends: [1, 2, 3],
  job: function() {
    console.log('FE');
  }
}

const exp = creatObj(kk);
```

![](https://user-gold-cdn.xitu.io/2019/4/26/16a58a00272023b2?w=560&h=314&f=png&s=35349)

ç¼ºç‚¹ï¼š 
1. æ¯æ¬¡åˆ›å»ºå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ã€‚
2.  **å¼•ç”¨ç±»å‹** ä¼šè¢«å¤šä¸ªå®ä¾‹ç¯¡æ”¹ã€‚

> æ³¨ï¼šObject.create()APIçš„ä»…é’ˆå¯¹ç¬¬ä¸€ä¸ªå‚æ•°çš„polyfillå°±æ˜¯ :
```js
function object(obj) {
  function F() {};
  F.prototype = obj;
  return new F();
}
```

### å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
ä¸Šé¢æˆ‘ä»¬è°ˆåˆ°äº† **ç»„åˆç»§æ‰¿**ï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»ï¼Œå› æ­¤çˆ¶ç±»çš„å®ä¾‹å±æ€§ä¼šåœ¨å­ç±»çš„å®ä¾‹å’Œå…¶åŸå‹ä¸Šå„è‡ªåˆ›å»ºä¸€ä»½ï¼Œè¿™ä¼šå¯¼è‡´å®ä¾‹å±æ€§å±è”½åŸå‹é“¾ä¸Šçš„åŒåå±æ€§ã€‚

å¥½åœ¨æˆ‘ä»¬æœ‰ **å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿**ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯é€šè¿‡ **å¯„ç”Ÿå¼ç»§æ‰¿** æ¥ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ï¼Œç„¶åå†å°†ç»“æœæŒ‡å®šç»™å­ç±»çš„åŸå‹ã€‚è¿™å¯ä»¥è¯´æ˜¯åœ¨ ES6 ä¹‹å‰æœ€å¥½çš„ç»§æ‰¿æ–¹å¼äº†ã€‚

```js
function creatObj(child, parent) {
  const prototype = Object.create(parent.prototype);
  prototype.constructor = child
  child.prototype = prototype;
}
```
ä¸¾ä¸ªä¾‹å­ï¼š

```js
// function object(o) {
//   function F() {};
//   F.prototype = o;
//   return new F();
// }

function creatObj(child, parent) {
  const prototype = Object.create(parent.prototype); // æˆ–è€…const prototype = object(parent.prototype)
  prototype.constructor = child
  child.prototype = prototype;
}

function Person(name) {
  this.name = name;
  this.body = ['head', 'arm', 'leg'];
}

Person.prototype.act = function() {
  console.log('run');
}

function Wife(hobby) {
  this.hobby = hobby;
  this.friend = [1, 2, 3];

  Person.call(this, 'Linda');
}

// Wife.prototype = new Person(); 

// Wife.prototype.constructor = Wife; // ä¿®æ­£constructoræŒ‡é’ˆ
creatObj(Wife, Person);

Wife.prototype.job = function() {
  console.log('FE');
}

const kk = new Wife('clothes');
```


![](https://user-gold-cdn.xitu.io/2019/4/26/16a58c966f55b8e8?w=1016&h=514&f=png&s=81383)

å¼•ç”¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ä¸­å¯¹å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„å¤¸èµå°±æ˜¯ï¼š

è¿™ç§æ–¹å¼çš„é«˜æ•ˆç‡ä½“ç°å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å› æ­¤é¿å…äº†åœ¨ Parent.prototype ä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±æ€§ã€‚ä¸æ­¤åŒæ—¶ï¼ŒåŸå‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ï¼›å› æ­¤ï¼Œè¿˜èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ instanceof å’Œ isPrototypeOfã€‚å¼€å‘äººå‘˜æ™®éè®¤ä¸ºå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹æœ€ç†æƒ³çš„ç»§æ‰¿èŒƒå¼ã€‚

å…¶å®ä¹Ÿæœ‰ä¸ªç¼ºç‚¹ï¼šè¦åœ¨å­æ„é€ å‡½æ•°çš„åŸå‹ä¸Šæ·»åŠ å±æ€§å’Œæ–¹æ³•åªèƒ½åœ¨å®ç°å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ä¹‹åã€‚

æœ¬æ–‡å®Œã€‚

å¸Œæœ›çœ‹åˆ°å„ä½æŠ€æœ¯äººå¯¹è¿™ç¯‡æ–‡ç« æœ‰ä¸åŒçš„æœ‰â€œè¯æ®â€ï¼Œç¬¦åˆé€»è¾‘çš„åˆ†æã€çœ‹æ³•ï½

æ–‡ç« ä¼šç¬¬ä¸€æ—¶é—´æ›´æ–°åœ¨[GitHub](https://github.com/YxrSadhu/Article)ï¼Œè§‰å¾—å†™å¾—è¿˜ä¸é”™çš„ï¼Œå¯ä»¥ç‚¹ä¸ªstaræ”¯æŒä¸‹ä½œè€…ğŸª

---

å‚è€ƒï¼š

1. [JavaScriptæ·±å…¥ä¹‹ç»§æ‰¿çš„å¤šç§æ–¹å¼å’Œä¼˜ç¼ºç‚¹](https://github.com/mqyqingfeng/Blog/issues/16)
2. [JavaScript ä¸ƒå¤§ç»§æ‰¿å…¨è§£æ](https://juejin.im/post/5caeee53f265da03914d4e98#heading-5)